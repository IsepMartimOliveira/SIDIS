<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="855px" preserveAspectRatio="none" style="width:1697px;height:855px;background:#FFFFFF;" version="1.1" viewBox="0 0 1697 855" width="1697px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="637.2754" style="stroke:#181818;stroke-width:1.0;" width="10" x="256" y="116.9121"/><rect fill="#FFFFFF" height="545.7568" style="stroke:#181818;stroke-width:1.0;" width="10" x="654" y="148.2031"/><rect fill="#FFFFFF" height="73.373" style="stroke:#181818;stroke-width:1.0;" width="10" x="659" y="436.1953"/><rect fill="#FFFFFF" height="77.5186" style="stroke:#181818;stroke-width:1.0;" width="10" x="1156" y="179.4941"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1309" y="334.5313"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1309" y="602.4414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="83.6211" y2="772.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="260.5" x2="260.5" y1="83.6211" y2="772.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="659" x2="659" y1="83.6211" y2="772.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1160.5" x2="1160.5" y1="83.6211" y2="772.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1313.5" x2="1313.5" y1="83.6211" y2="772.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1460.5" x2="1460.5" y1="83.6211" y2="772.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="23" y="80.1074">Subscriber</text><ellipse cx="60" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60,21.5 L60,48.5 M47,29.5 L73,29.5 M60,48.5 L47,63.5 M60,48.5 L73,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="23" y="786.2949">Subscriber</text><ellipse cx="60" cy="798.3086" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60,806.3086 L60,833.3086 M47,814.3086 L73,814.3086 M60,833.3086 L47,848.3086 M60,833.3086 L73,848.3086 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="178.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="185.5" y="72.1074">:SubscriptionsController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="178.5" y="771.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="185.5" y="793.2949">:SubscriptionsController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="584" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="591" y="72.1074">:SubscriptionsService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="584" y="771.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="591" y="793.2949">:SubscriptionsService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="1103.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1110.5" y="72.1074">:UserRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="1103.5" y="771.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1110.5" y="793.2949">:UserRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171" x="1228.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="1235.5" y="72.1074">:SubscriptionsRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171" x="1228.5" y="771.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="1235.5" y="793.2949">:SubscriptionsRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1409.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1416.5" y="72.1074">:Subscriptions</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1409.5" y="771.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1416.5" y="793.2949">:Subscriptions</text><rect fill="#FFFFFF" height="637.2754" style="stroke:#181818;stroke-width:1.0;" width="10" x="256" y="116.9121"/><rect fill="#FFFFFF" height="545.7568" style="stroke:#181818;stroke-width:1.0;" width="10" x="654" y="148.2031"/><rect fill="#FFFFFF" height="73.373" style="stroke:#181818;stroke-width:1.0;" width="10" x="659" y="436.1953"/><rect fill="#FFFFFF" height="77.5186" style="stroke:#181818;stroke-width:1.0;" width="10" x="1156" y="179.4941"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1309" y="334.5313"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1309" y="602.4414"/><polygon fill="#181818" points="244,112.9121,254,116.9121,244,120.9121,248,116.9121" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60" x2="250" y1="116.9121" y2="116.9121"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="67" y="111.6494">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="78" y="111.6494">PATCH /subscriptions/renew</text><polygon fill="#181818" points="642,144.2031,652,148.2031,642,152.2031,646,148.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="266" x2="648" y1="148.2031" y2="148.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="273" y="142.9404">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="284" y="142.9404">subscriptions = renewAnualSubscription(long desiredVersion);</text><polygon fill="#181818" points="1144,175.4941,1154,179.4941,1144,183.4941,1148,179.4941" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="664" x2="1150" y1="179.4941" y2="179.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="671" y="174.2314">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="682" y="174.2314">User user = userRepository.findById(Long.valueOf(newString))</text><polygon fill="#181818" points="675,253.0127,665,257.0127,675,261.0127,671,257.0127" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="669" x2="1160" y1="257.0127" y2="257.0127"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="681" y="251.75">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="692" y="251.75">user</text><path d="M1171,192.4941 L1171,305.4941 L1376,305.4941 L1376,202.4941 L1366,192.4941 L1171,192.4941 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1366,192.4941 L1366,202.4941 L1376,202.4941 L1366,192.4941 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1177" y="211.5225">if the user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="1177" y="228.8135">who is trying to subscribe</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1177" y="246.1045">is does not exist in the system</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="1177" y="263.3955">the code will</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="1177" y="280.6865">end here and throw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="1177" y="297.9775">a UsernameNotFoundException</text><polygon fill="#181818" points="1297,330.5313,1307,334.5313,1297,338.5313,1301,334.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="664" x2="1303" y1="334.5313" y2="334.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="671" y="329.2686">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="494" x="682" y="329.2686">Subscriptions subscription = repository.findByActiveStatus_ActiveAndUser(true, user)</text><polygon fill="#181818" points="675,361.8223,665,365.8223,675,369.8223,671,365.8223" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="669" x2="1313" y1="365.8223" y2="365.8223"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="681" y="360.5596">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="692" y="360.5596">subscriptions</text><line style="stroke:#181818;stroke-width:1.0;" x1="664" x2="711" y1="423.1953" y2="423.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="711" x2="711" y1="423.1953" y2="436.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="670" x2="711" y1="436.1953" y2="436.1953"/><polygon fill="#181818" points="680,432.1953,670,436.1953,680,440.1953,676,436.1953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="676" y="417.9326">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="467" x="687" y="417.9326">if (Objects.equals(subscription.getPaymentType().getPaymentType(), "monthly"))</text><path d="M1166,378.8223 L1166,474.8223 L1387,474.8223 L1387,388.8223 L1377,378.8223 L1166,378.8223 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1377,378.8223 L1377,388.8223 L1387,388.8223 L1377,378.8223 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1172" y="397.8506">if the user is trying to renew</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="1172" y="415.1416">a subscription which is not annual,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="1172" y="432.4326">the code will</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="1172" y="449.7236">end here and throw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="1172" y="467.0146">a IllegalArgumentException</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="669" x2="711" y1="508.5684" y2="508.5684"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="711" x2="711" y1="508.5684" y2="521.5684"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="664" x2="711" y1="521.5684" y2="521.5684"/><polygon fill="#181818" points="674,517.5684,664,521.5684,674,525.5684,670,521.5684" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="676" y="503.3057">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="687" y="503.3057">&#160;</text><polygon fill="#181818" points="1444,555.5049,1454,559.5049,1444,563.5049,1448,559.5049" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="664" x2="1450" y1="559.5049" y2="559.5049"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="671" y="554.2422">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="682" y="554.2422">subscription.checkChange(desiredVersion)</text><path d="M1471,529.5684 L1471,573.5684 L1690,573.5684 L1690,539.5684 L1680,529.5684 L1471,529.5684 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1680,529.5684 L1680,539.5684 L1690,539.5684 L1680,529.5684 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1477" y="548.5967">this will check if this operation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="1477" y="565.8877">is already done and avoid conflicts</text><polygon fill="#181818" points="1297,598.4414,1307,602.4414,1297,606.4414,1301,602.4414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="664" x2="1303" y1="602.4414" y2="602.4414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="671" y="597.1787">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="689" y="597.1787">save(subscription)</text><polygon fill="#181818" points="675,629.7324,665,633.7324,675,637.7324,671,633.7324" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="669" x2="1313" y1="633.7324" y2="633.7324"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="681" y="628.4697">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="699" y="628.4697">subscription</text><polygon fill="#181818" points="277,689.96,267,693.96,277,697.96,273,693.96" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="271" x2="658" y1="693.96" y2="693.96"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="283" y="688.6973">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="301" y="688.6973">subscription</text><path d="M5,646.7324 L5,725.7324 L251,725.7324 L251,656.7324 L241,646.7324 L5,646.7324 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M241,646.7324 L241,656.7324 L251,656.7324 L241,646.7324 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="11" y="665.7607">The controller here also</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="11" y="683.0518">creates an ResponseEntity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="11" y="700.3428">to show the user the subscription with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="11" y="717.6338">"subscriptionsViewMapper" as objView</text><polygon fill="#181818" points="71,750.1875,61,754.1875,71,758.1875,67,754.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="65" x2="260" y1="754.1875" y2="754.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="77" y="748.9248">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="95" y="748.9248">subscriptionView</text><!--SRC=[ZLHDRzim3BthLn2vp06QvDvz05dGOGMsjMYwNWT5PcnrikH9T5p_-r5AtDWksksIMD8ZzHuVgNSbKHqkLwlQI4jDPPRALQk0Vngq2XUvbeMNbP0DEQb87oGXE9lMjgbsw8KGVE0ypBRDBYYlUMy6Ci1QYLfwqahNd1bcbwVpchIpOUCiUMVC2RmXRzw2Rz4VjCA4ZTyJxC-0_Wvh5pGpwHAgttehwoI4p_uLqUDOzLh1ubCY3fTmkxxVV8LL669N7Yss8Y4O6MapSWI1Zv10Qzj8CxmeCyuMa6FG7lC7z87tvk-5I4auMQyEadHeui_7z7VMjDnhct_khlFi6oTR7gHfy6QVyNLRyjeMyxbuJhCu4un9XB2EZVQwA4a0w3rGYSSJWBPqe0EGxpW9aEibxJ120-GE0t0yu9CE1DgcuD05meeHSQ5SZj1gOtYDDeSIFOBa3ogzQtbJ9eLMLlZ3qHVNsFpgIM4gZOW1aTwv6YVZOEpLgDIfqfFAh6D3uvOaDU7NSR6sURmu8z_WHH8y5ttsnIicYW6Hut4iM7QpUqH5OScZ94t8XY7B0kbMTXLQkkzgpEOlDYvWLl64bAQRiKslkZ7suTXliNWZvMsfLHcHqHDfOwjT_ByFrpoZXJHhNpIHtkisFCldUeWSdr-BE2q3eoRLMweIrUzDAMs1sQJVHxAfP0MHAgI8OnLuozNePI8K9KhZKUOTzw0z2f47ftFMQVT6ini3rjFkOLxoW2EVNde_9dzM7eTySdPopU2UsT-dOlTFtgdE9ZW1YWaJ3uoqS8UXvdx2AqkQEf56gtJjsUqqHoDhDPK2PgDsVD3OVfTrVNfPtUunxfo5yxlrOR7e7wvXQCBz1G00]--></g></svg>