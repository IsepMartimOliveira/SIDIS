@startuml
'https://plantuml.com/sequence-diagram
autoactivate on
autonumber
title  Get Subscription plan details

autonumber

actor "Client" as Ac
participant ":SubscriptionController" as Auth
participant ":SubscriptionService" as SService
participant ":SubscriptionManager" as UManager
database ":SubsDB" as SDB
participant ":PlanService" as PService
participant ":PlanManager" as PManager
database ":PlanDB" as PDB
participant ":MS Broker" as Broker

Ac->Auth: GET /subscriptions/
Auth->SService: planDetails
SService->UManager: findSub
UManager->SDB: checkDataBase
SDB-->UManager:sub
UManager --> SService:sub

SService -> Broker: publish
Broker--> PService: notify

PService ->PManager: getPlan
PManager -> PDB: findByName
PDB-->PManager: plan
PManager -->PService: plan

PService -> Broker: publish
Broker--> SService: notify

SService --> SService: planDetails
SService -->Auth:planDetails
Auth --> Ac : 200

@enduml