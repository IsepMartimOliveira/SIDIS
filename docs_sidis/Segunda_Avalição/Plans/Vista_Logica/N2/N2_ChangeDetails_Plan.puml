@startuml
'https://plantuml.com/sequence-diagram
autoactivate on
autonumber
title  Change details from  a  Plan

autonumber

actor "Client" as Ac
participant ":PlanC" as Auth
participant ":PlanQ" as Serv
participant ":SubscriptionC" as SubC
participant ":SubscriptionQ" as SubQ
participant ":UserC" as UserC
participant ":Message Broker" as Broker

Ac->Auth:PATCH plans/update/{name}
Auth->Auth:storePlan(Plan plan)
Auth-->Ac:200

Auth->Broker: publish(plans_create,PlanDetails plandetails)
Broker-->Serv:notify(plans_created,PlanDetails plandetails)
Serv->Serv:storePlan(Plan plan)

Broker-->SubC:notify(plans_created,PlanDetails plandetails)
Broker-->SubQ:notify(plans_created,PlanDetails plandetails)

Broker-->UserC:notify(plans_created,PlanDetails plandetails)









@enduml
