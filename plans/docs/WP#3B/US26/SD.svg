<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="649.6px" preserveAspectRatio="none" style="width:1326px;height:649px;background:#FFFFFF;" version="1.1" viewBox="0 0 1326 649" width="1326.4px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="128.6063" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1106" y="448.3375"/><rect fill="#FFFFFF" height="24.2813" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1251.6" y="521.1813"/><rect fill="none" height="124.475" style="stroke:#000000;stroke-width:1.2000000000000002;" width="638.8" x="399.6" y="300.3813"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="92.8" x2="92.8" y1="66.0875" y2="584.1438"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="250.4" x2="250.4" y1="66.0875" y2="584.1438"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="461.2" x2="461.2" y1="66.0875" y2="584.1438"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="812.8" x2="812.8" y1="66.0875" y2="584.1438"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="931.2" x2="931.2" y1="66.0875" y2="584.1438"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1008.8" x2="1008.8" y1="66.0875" y2="584.1438"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1109.6" x2="1109.6" y1="66.0875" y2="584.1438"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1255.2" x2="1255.2" y1="66.0875" y2="584.1438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="173.6" x="4" y="63.6266">Project Manager/Financial director</text><ellipse cx="93.2" cy="10.8" fill="#E2E2F0" rx="6.4" ry="6.4" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M93.2,17.2 L93.2,38.8 M82.8,23.6 L103.6,23.6 M93.2,38.8 L82.8,50.8 M93.2,38.8 L103.6,50.8 " fill="none" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="173.6" x="4" y="594.9703">Project Manager/Financial director</text><ellipse cx="93.2" cy="604.2313" fill="#E2E2F0" rx="6.4" ry="6.4" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M93.2,610.6313 L93.2,632.2313 M82.8,617.0313 L103.6,617.0313 M93.2,632.2313 L82.8,644.2313 M93.2,632.2313 L103.6,644.2313 " fill="none" style="stroke:#181818;stroke-width:0.4000000000000001;"/><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="120" x="190.4" y="40"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="108.8" x="196" y="57.2266">:DashboardController</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="120" x="190.4" y="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="108.8" x="196" y="600.5703">:DashboardController</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108" x="407.6" y="40"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="96.8" x="413.2" y="57.2266">:DashboardService</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108" x="407.6" y="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="96.8" x="413.2" y="600.5703">:DashboardService</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="124.8" x="750.4" y="40"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="113.6" x="756" y="57.2266">:DashboardRepository</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="124.8" x="750.4" y="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="113.6" x="756" y="600.5703">:DashboardRepository</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="96.8" x="883.2" y="40"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="85.6" x="888.8" y="57.2266">:PlansRepository</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="96.8" x="883.2" y="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="85.6" x="888.8" y="600.5703">:PlansRepository</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="42.4" x="988" y="40"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="31.2" x="993.6" y="57.2266">:Plans</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="42.4" x="988" y="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="31.2" x="993.6" y="600.5703">:Plans</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="143.2" x="1038.4" y="40"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="132" x="1044" y="57.2266">:CreateDashboardMapper</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="143.2" x="1038.4" y="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="132" x="1044" y="600.5703">:CreateDashboardMapper</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="132" x="1189.6" y="40"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="120.8" x="1195.2" y="57.2266">:DashboardViewMapper</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="132" x="1189.6" y="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="120.8" x="1195.2" y="600.5703">:DashboardViewMapper</text><rect fill="#FFFFFF" height="128.6063" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1106" y="448.3375"/><rect fill="#FFFFFF" height="24.2813" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1251.6" y="521.1813"/><polygon fill="#181818" points="240.8,88.7688,248.8,91.9688,240.8,95.1688,244,91.9688" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="93.2" x2="245.6" y1="91.9688" y2="91.9688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="98.4" x="98.8" y="88.0836">GET /currentRevenue</text><polygon fill="#181818" points="452,113.05,460,116.25,452,119.45,455.2,116.25" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="250.4" x2="456.8" y1="116.25" y2="116.25"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="192" x="256" y="112.3648">getDashboardRevenueTillNow(String plan)</text><polygon fill="#181818" points="803.2,152.8125,811.2,156.0125,803.2,159.2125,806.4,156.0125" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="461.6" x2="808" y1="156.0125" y2="156.0125"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="332" x="467.2" y="152.1273">getPaymentTypeAndPlanNameCounts(String startDate, String endDate)</text><path d="M176.8,126.65 L176.8,173.85 L457.6,173.85 L457.6,134.65 L449.6,126.65 L176.8,126.65 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M449.6,126.65 L449.6,134.65 L457.6,134.65 L449.6,126.65 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="217.6" x="181.6" y="141.4461">Search will create an object from Subscriptions</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="264" x="181.6" y="154.5273">with planName, paymentType, startDate, and the number</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="133.6" x="181.6" y="167.6086">of subscriptions for that plan.</text><polygon fill="#181818" points="470.4,192.575,462.4,195.775,470.4,198.975,467.2,195.775" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="465.6" x2="812" y1="195.775" y2="195.775"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="31.2" x="475.2" y="191.8898">results</text><polygon fill="#181818" points="922,238.8781,930,242.0781,922,245.2781,925.2,242.0781" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="461.6" x2="926.8" y1="242.0781" y2="242.0781"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="108.8" x="467.2" y="238.193">findByName(planName)</text><path d="M222.4,206.175 L222.4,266.175 L457.6,266.175 L457.6,214.175 L449.6,206.175 L222.4,206.175 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M449.6,206.175 L449.6,214.175 L457.6,214.175 L449.6,206.175 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="218.4" x="227.2" y="220.9711">Search will compare the planName from the obj</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="168" x="227.2" y="234.0523">with the plan introduced by the user.</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="183.2" x="227.2" y="247.1336">If it matches, it will return the revenue of</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="210.4" x="227.2" y="260.2148">that plan; otherwise, it will return all revenues.</text><polygon fill="#181818" points="470.4,285.1813,462.4,288.3813,470.4,291.5813,467.2,288.3813" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="465.6" x2="930.8" y1="288.3813" y2="288.3813"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="35.2" x="475.2" y="284.4961">planObj</text><path d="M399.6,300.3813 L448.4,300.3813 L448.4,307.0625 L440.4,315.0625 L399.6,315.0625 L399.6,300.3813 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.2000000000000002;"/><rect fill="none" height="124.475" style="stroke:#000000;stroke-width:1.2000000000000002;" width="638.8" x="399.6" y="300.3813"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="12.8" x="411.6" y="311.9773">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="147.2" x="460.4" y="311.1164">[(obj.paymentType == "monthly")]</text><path d="M1042.4,304.3813 L1042.4,325.1813 L1209.6,325.1813 L1209.6,312.3813 L1201.6,304.3813 L1042.4,304.3813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M1201.6,304.3813 L1201.6,312.3813 L1209.6,312.3813 L1201.6,304.3813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="150.4" x="1047.2" y="319.1773">Perform revenue calculation here</text><polygon fill="#181818" points="999.6,329.7438,1007.6,332.9438,999.6,336.1438,1002.8,332.9438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="461.6" x2="1004.4" y1="332.9438" y2="332.9438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="75.2" x="467.2" y="329.0586">getMonthlyFee()</text><polygon fill="#181818" points="470.4,354.025,462.4,357.225,470.4,360.425,467.2,357.225" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="465.6" x2="1008.4" y1="357.225" y2="357.225"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="54.4" x="475.2" y="353.3398">monthlyFee</text><line style="stroke:#000000;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="399.6" x2="1038.4" y1="364.425" y2="364.425"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="147.2" x="403.6" y="373.5602">[(obj.paymentType == "annually")]</text><polygon fill="#181818" points="999.6,390.975,1007.6,394.175,999.6,397.375,1002.8,394.175" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="461.6" x2="1004.4" y1="394.175" y2="394.175"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="70.4" x="467.2" y="390.2898">getAnnualFee()</text><polygon fill="#181818" points="470.4,415.2563,462.4,418.4563,470.4,421.6563,467.2,418.4563" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="465.6" x2="1008.4" y1="418.4563" y2="418.4563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="48" x="475.2" y="414.5711">annualFee</text><polygon fill="#181818" points="1096.4,445.1375,1104.4,448.3375,1096.4,451.5375,1099.6,448.3375" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="461.6" x2="1101.2" y1="448.3375" y2="448.3375"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="164.8" x="467.2" y="444.4523">createRevenueTillNow(finalRevenue)</text><polygon fill="#181818" points="470.4,469.4188,462.4,472.6188,470.4,475.8188,467.2,472.6188" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="465.6" x2="1105.2" y1="472.6188" y2="472.6188"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="13.6" x="475.2" y="468.7336">obj</text><polygon fill="#181818" points="259.2,493.7,251.2,496.9,259.2,500.1,256,496.9" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="254.4" x2="460.8" y1="496.9" y2="496.9"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="13.6" x="264" y="493.0148">obj</text><polygon fill="#181818" points="1242,517.9813,1250,521.1813,1242,524.3813,1245.2,521.1813" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="250.4" x2="1246.8" y1="521.1813" y2="521.1813"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="100.8" x="256" y="517.2961">toDashboardView(obj)</text><polygon fill="#181818" points="259.2,542.2625,251.2,545.4625,259.2,548.6625,256,545.4625" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="254.4" x2="1254.8" y1="545.4625" y2="545.4625"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="70.4" x="264" y="541.5773">dashboardView</text><polygon fill="#181818" points="102,566.5438,94,569.7438,102,572.9438,98.8,569.7438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="97.2" x2="249.6" y1="569.7438" y2="569.7438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="70.4" x="106.8" y="565.8586">dashboardView</text><!--MD5=[95c3287a6111af2b36430f3a6a5ba5ca]
@startuml
'https://plantuml.com/sequence-diagram

actor "Project Manager/Financial director" as Ac
participant ":DashboardController" as Ctrl
participant ":DashboardService" as Serv
participant ":DashboardRepository" as Repo
participant ":PlansRepository" as RepoPlans
participant ":Plans" as Plans
participant ":CreateDashboardMapper" as Mapper
participant ":DashboardViewMapper" as View

Ac -> Ctrl: GET /currentRevenue
Ctrl -> Serv: getDashboardRevenueTillNow(String plan)
Serv -> Repo: getPaymentTypeAndPlanNameCounts(String startDate, String endDate)
note left
Search will create an object from Subscriptions
with planName, paymentType, startDate, and the number
of subscriptions for that plan.
end note
Repo - -> Serv: results

Serv -> RepoPlans: findByName(planName)
note left
Search will compare the planName from the obj
with the plan introduced by the user.
If it matches, it will return the revenue of
that plan; otherwise, it will return all revenues.
end note
RepoPlans - -> Serv: planObj

alt (obj.paymentType == "monthly")
    Serv -> Plans: getMonthlyFee()
    Plans - -> Serv: monthlyFee
else (obj.paymentType == "annually")
    Serv -> Plans: getAnnualFee()
    Plans - -> Serv: annualFee
end
note right
Perform revenue calculation here
end note
Serv -> Mapper: createRevenueTillNow(finalRevenue)
activate Mapper
Mapper - -> Serv: obj
Serv - -> Ctrl: obj
deactivate Serv
Ctrl -> View: toDashboardView(obj)
activate View
View - -> Ctrl: dashboardView
deactivate View
Ctrl - -> Ac: dashboardView

@enduml

@startuml

actor "Project Manager/Financial director" as Ac
participant ":DashboardController" as Ctrl
participant ":DashboardService" as Serv
participant ":DashboardRepository" as Repo
participant ":PlansRepository" as RepoPlans
participant ":Plans" as Plans
participant ":CreateDashboardMapper" as Mapper
participant ":DashboardViewMapper" as View

Ac -> Ctrl: GET /currentRevenue
Ctrl -> Serv: getDashboardRevenueTillNow(String plan)
Serv -> Repo: getPaymentTypeAndPlanNameCounts(String startDate, String endDate)
note left
Search will create an object from Subscriptions
with planName, paymentType, startDate, and the number
of subscriptions for that plan.
end note
Repo - -> Serv: results

Serv -> RepoPlans: findByName(planName)
note left
Search will compare the planName from the obj
with the plan introduced by the user.
If it matches, it will return the revenue of
that plan; otherwise, it will return all revenues.
end note
RepoPlans - -> Serv: planObj

alt (obj.paymentType == "monthly")
    Serv -> Plans: getMonthlyFee()
    Plans - -> Serv: monthlyFee
else (obj.paymentType == "annually")
    Serv -> Plans: getAnnualFee()
    Plans - -> Serv: annualFee
end
note right
Perform revenue calculation here
end note
Serv -> Mapper: createRevenueTillNow(finalRevenue)
activate Mapper
Mapper - -> Serv: obj
Serv - -> Ctrl: obj
deactivate Serv
Ctrl -> View: toDashboardView(obj)
activate View
View - -> Ctrl: dashboardView
deactivate View
Ctrl - -> Ac: dashboardView

@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>