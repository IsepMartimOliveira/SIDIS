<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1131px" preserveAspectRatio="none" style="width:2192px;height:1131px;background:#FFFFFF;" version="1.1" viewBox="0 0 2192 1131" width="2192px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="27.6094" id="_title" style="stroke:none;stroke-width:1.0;" width="984" x="602.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="974" x="607.5" y="29.5332">Sequence Diagram / As a Project Manager, I want to know the number of active subscriptions or canceled subscriptions in a specific month</text><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="809.5" x="616" y="633.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="116" x2="116" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="319.5" x2="319.5" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="693" x2="693" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1143.5" x2="1143.5" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1291.5" x2="1291.5" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1388.5" x2="1388.5" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1485.5" x2="1485.5" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1672" x2="1672" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1887" x2="1887" y1="121.2188" y2="1049.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2051" x2="2051" y1="121.2188" y2="1049.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="5" y="118.1426">Project Manager/Financial director</text><ellipse cx="116.5" cy="52.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M116.5,60.1094 L116.5,87.1094 M103.5,68.1094 L129.5,68.1094 M116.5,87.1094 L103.5,102.1094 M116.5,87.1094 L129.5,102.1094 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="5" y="1062.8926">Project Manager/Financial director</text><ellipse cx="116.5" cy="1074.4688" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M116.5,1082.4688 L116.5,1109.4688 M103.5,1090.4688 L129.5,1090.4688 M116.5,1109.4688 L103.5,1124.4688 M116.5,1109.4688 L129.5,1124.4688 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="244.5" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="251.5" y="110.1426">:DashboardController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="244.5" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="251.5" y="1069.8926">:DashboardController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="626" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="633" y="110.1426">:DashboardService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="626" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="633" y="1069.8926">:DashboardService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156" x="1065.5" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="1072.5" y="110.1426">:DashboardRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156" x="1065.5" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="1072.5" y="1069.8926">:DashboardRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1231.5" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1238.5" y="110.1426">:PlansRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1231.5" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1238.5" y="1069.8926">:PlansRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="1362.5" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1369.5" y="110.1426">:Plans</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="1362.5" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1369.5" y="1069.8926">:Plans</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1425.5" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1432.5" y="110.1426">:DisplayRevenue</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1425.5" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1432.5" y="1069.8926">:DisplayRevenue</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="222" x="1561" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208" x="1568" y="110.1426">:DashboardRevenueViewMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="222" x="1561" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208" x="1568" y="1069.8926">:DashboardRevenueViewMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="1793" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="1800" y="110.1426">:generateMonthlyRevenues</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="1793" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="1800" y="1069.8926">:generateMonthlyRevenues</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1991" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1998" y="110.1426">:updatePlanData</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1991" y="1048.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1998" y="1069.8926">:updatePlanData</text><path d="M1769,136.2188 L1769,211.2188 L2004,211.2188 L2004,146.2188 L1994,136.2188 L1769,136.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1994,136.2188 L1994,146.2188 L2004,146.2188 L1994,136.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1775" y="154.7139">Generates monthly revenues based</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1775" y="171.0654">on plan data and counts.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="1775" y="187.417">Calculates total revenue for each</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="1775" y="203.7686">month and adds it to the revenue list.</text><path d="M1916,221.625 L1916,345.625 L2185,345.625 L2185,231.625 L2175,221.625 L1916,221.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2175,221.625 L2175,231.625 L2185,231.625 L2175,221.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="1922" y="240.1201">Updates the plan data with the calculated</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1922" y="256.4717">total revenue for a specific month and year.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="1922" y="272.8232">If the plan and month already exist, it</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1922" y="289.1748">updates the total revenue.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1922" y="305.5264">Otherwise, it adds a new</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="1922" y="321.8779">entry with the month and total revenue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="1922" y="338.2295">to the plan's revenue data.</text><polygon fill="#181818" points="307.5,369.4375,317.5,373.4375,307.5,377.4375,311.5,373.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="116.5" x2="313.5" y1="373.4375" y2="373.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="123.5" y="368.5811">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="134.5" y="368.5811">GET /dashboard/revenuePlan</text><polygon fill="#181818" points="681.5,399.7891,691.5,403.7891,681.5,407.7891,685.5,403.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="319.5" x2="687.5" y1="403.7891" y2="403.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="326.5" y="398.9326">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="339" x="337.5" y="398.9326">getMonthlyRevenuePlan(String plan, Integer numberMonth)</text><polygon fill="#181818" points="1131.5,449.4922,1141.5,453.4922,1131.5,457.4922,1135.5,453.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693.5" x2="1137.5" y1="453.4922" y2="453.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="700.5" y="448.6357">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="415" x="711.5" y="448.6357">getPaymentTypeAndPlanNameCounts(String startDate, String endDate)</text><path d="M337,416.7891 L337,475.7891 L688,475.7891 L688,426.7891 L678,416.7891 L337,416.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M678,416.7891 L678,426.7891 L688,426.7891 L678,416.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="343" y="435.2842">Search will create an object from Subscriptions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330" x="343" y="451.6357">with planName, paymentType, startDate, and the number</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="343" y="467.9873">of subscriptions for that plan.</text><polygon fill="#181818" points="704.5,499.1953,694.5,503.1953,704.5,507.1953,700.5,503.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="698.5" x2="1142.5" y1="503.1953" y2="503.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="710.5" y="498.3389">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="721.5" y="498.3389">results</text><polygon fill="#181818" points="1280,557.0742,1290,561.0742,1280,565.0742,1284,561.0742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693.5" x2="1286" y1="561.0742" y2="561.0742"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="700.5" y="556.2178">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="711.5" y="556.2178">findByName(planName)</text><path d="M394,516.1953 L394,591.1953 L688,591.1953 L688,526.1953 L678,516.1953 L394,516.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M678,516.1953 L678,526.1953 L688,526.1953 L678,516.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="400" y="534.6904">Search will compare the planName from the obj</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="400" y="551.042">with the plan introduced by the user.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="400" y="567.3936">If it matches, it will return the revenue of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="400" y="583.7451">that plan; otherwise, it will return all revenues.</text><polygon fill="#181818" points="704.5,614.9531,694.5,618.9531,704.5,622.9531,700.5,618.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="698.5" x2="1291" y1="618.9531" y2="618.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="710.5" y="614.0967">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="721.5" y="614.0967">planObj</text><path d="M616,633.9531 L677,633.9531 L677,642.3047 L667,652.3047 L616,652.3047 L616,633.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="809.5" x="616" y="633.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="631" y="648.4482">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="184" x="692" y="647.3721">[(obj.paymentType == "monthly")]</text><polygon fill="#181818" points="1377,670.6563,1387,674.6563,1377,678.6563,1381,674.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693.5" x2="1383" y1="674.6563" y2="674.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="700.5" y="669.7998">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="711.5" y="669.7998">getMonthlyFee()</text><polygon fill="#181818" points="704.5,701.0078,694.5,705.0078,704.5,709.0078,700.5,705.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="698.5" x2="1388" y1="705.0078" y2="705.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="710.5" y="700.1514">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="721.5" y="700.1514">monthlyFee</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="616" x2="1425.5" y1="714.0078" y2="714.0078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="184" x="621" y="725.4268">[(obj.paymentType == "annually")]</text><polygon fill="#181818" points="1377,747.1953,1387,751.1953,1377,755.1953,1381,751.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693.5" x2="1383" y1="751.1953" y2="751.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="700.5" y="746.3389">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="711.5" y="746.3389">getAnnualFee()</text><polygon fill="#181818" points="704.5,777.5469,694.5,781.5469,704.5,785.5469,700.5,781.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="698.5" x2="1388" y1="781.5469" y2="781.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="710.5" y="776.6904">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="728.5" y="776.6904">annualFee</text><polygon fill="#181818" points="1875,814.8984,1885,818.8984,1875,822.8984,1879,818.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693.5" x2="1881" y1="818.8984" y2="818.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="700.5" y="814.042">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="754" x="718.5" y="814.042">generateMonthlyRevenues(planName, monthlyRevenue, dividedAnnualRevenue, numberMonth, monthsToAddRevenue, revenueList)</text><polygon fill="#181818" points="704.5,845.25,694.5,849.25,704.5,853.25,700.5,849.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="698.5" x2="1886" y1="849.25" y2="849.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="710.5" y="844.3936">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="728.5" y="844.3936">-</text><polygon fill="#181818" points="2039,875.6016,2049,879.6016,2039,883.6016,2043,879.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693.5" x2="2045" y1="879.6016" y2="879.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="700.5" y="874.7451">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="431" x="718.5" y="874.7451">updatePlanData(planName, monthKey, totalRevenue, year, df, revenueList)</text><polygon fill="#181818" points="704.5,905.9531,694.5,909.9531,704.5,913.9531,700.5,909.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="698.5" x2="2050" y1="909.9531" y2="909.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="710.5" y="905.0967">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="728.5" y="905.0967">-</text><polygon fill="#181818" points="330.5,936.3047,320.5,940.3047,330.5,944.3047,326.5,940.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="324.5" x2="692.5" y1="940.3047" y2="940.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="336.5" y="935.4482">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="354.5" y="935.4482">revenueList</text><polygon fill="#181818" points="1474,966.6563,1484,970.6563,1474,974.6563,1478,970.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="319.5" x2="1480" y1="970.6563" y2="970.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="326.5" y="965.7998">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="344.5" y="965.7998">toDashboardRevenueView(displayRevenue)</text><polygon fill="#181818" points="1660,997.0078,1670,1001.0078,1660,1005.0078,1664,1001.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1486" x2="1666" y1="1001.0078" y2="1001.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1493" y="996.1514">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="1511" y="996.1514">dashboardRevenueViews</text><polygon fill="#181818" points="127.5,1027.3594,117.5,1031.3594,127.5,1035.3594,123.5,1031.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="121.5" x2="1671" y1="1031.3594" y2="1031.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="133.5" y="1026.5029">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="151.5" y="1026.5029">show revenue</text><!--MD5=[37891f968dd5189979637811ab8feae4]
@startuml
'https://plantuml.com/sequence-diagram
autonumber

title Sequence Diagram / As a Project Manager, I want to know the number of active subscriptions or canceled subscriptions in a specific month

actor "Project Manager/Financial director" as Ac
participant ":DashboardController" as Ctrl
participant ":DashboardService" as Serv
participant ":DashboardRepository" as Repo
participant ":PlansRepository" as RepoPlans
participant ":Plans" as Plans
participant ":DisplayRevenue" as Mapper
participant ":DashboardRevenueViewMapper" as View
participant ":generateMonthlyRevenues" as MonthlyRevenues
note over MonthlyRevenues
  Generates monthly revenues based
  on plan data and counts.
  Calculates total revenue for each
  month and adds it to the revenue list.
end note
participant ":updatePlanData" as UpdatePlanData
note over UpdatePlanData
  Updates the plan data with the calculated 
  total revenue for a specific month and year.
  If the plan and month already exist, it 
  updates the total revenue.
  Otherwise, it adds a new 
  entry with the month and total revenue 
  to the plan's revenue data.
  end note

Ac -> Ctrl: GET /dashboard/revenuePlan
Ctrl -> Serv: getMonthlyRevenuePlan(String plan, Integer numberMonth)

Serv -> Repo: getPaymentTypeAndPlanNameCounts(String startDate, String endDate)
note left
Search will create an object from Subscriptions
with planName, paymentType, startDate, and the number
of subscriptions for that plan.
end note
Repo - -> Serv: results

Serv -> RepoPlans: findByName(planName)
note left
Search will compare the planName from the obj
with the plan introduced by the user.
If it matches, it will return the revenue of
that plan; otherwise, it will return all revenues.
end note
RepoPlans - -> Serv: planObj

alt (obj.paymentType == "monthly")
    Serv -> Plans: getMonthlyFee()
    Plans - -> Serv: monthlyFee
else (obj.paymentType == "annually")
    Serv -> Plans: getAnnualFee()
    Plans - -> Serv: annualFee
end

Serv -> MonthlyRevenues: generateMonthlyRevenues(planName, monthlyRevenue, dividedAnnualRevenue, numberMonth, monthsToAddRevenue, revenueList)
MonthlyRevenues - -> Serv: -

Serv -> UpdatePlanData: updatePlanData(planName, monthKey, totalRevenue, year, df, revenueList)
UpdatePlanData - -> Serv: -

Serv - -> Ctrl: revenueList
Ctrl -> Mapper: toDashboardRevenueView(displayRevenue)
Mapper - -> View: dashboardRevenueViews

Ac <- - View: show revenue
@enduml

@startuml
autonumber

title Sequence Diagram / As a Project Manager, I want to know the number of active subscriptions or canceled subscriptions in a specific month

actor "Project Manager/Financial director" as Ac
participant ":DashboardController" as Ctrl
participant ":DashboardService" as Serv
participant ":DashboardRepository" as Repo
participant ":PlansRepository" as RepoPlans
participant ":Plans" as Plans
participant ":DisplayRevenue" as Mapper
participant ":DashboardRevenueViewMapper" as View
participant ":generateMonthlyRevenues" as MonthlyRevenues
note over MonthlyRevenues
  Generates monthly revenues based
  on plan data and counts.
  Calculates total revenue for each
  month and adds it to the revenue list.
end note
participant ":updatePlanData" as UpdatePlanData
note over UpdatePlanData
  Updates the plan data with the calculated 
  total revenue for a specific month and year.
  If the plan and month already exist, it 
  updates the total revenue.
  Otherwise, it adds a new 
  entry with the month and total revenue 
  to the plan's revenue data.
  end note

Ac -> Ctrl: GET /dashboard/revenuePlan
Ctrl -> Serv: getMonthlyRevenuePlan(String plan, Integer numberMonth)

Serv -> Repo: getPaymentTypeAndPlanNameCounts(String startDate, String endDate)
note left
Search will create an object from Subscriptions
with planName, paymentType, startDate, and the number
of subscriptions for that plan.
end note
Repo - -> Serv: results

Serv -> RepoPlans: findByName(planName)
note left
Search will compare the planName from the obj
with the plan introduced by the user.
If it matches, it will return the revenue of
that plan; otherwise, it will return all revenues.
end note
RepoPlans - -> Serv: planObj

alt (obj.paymentType == "monthly")
    Serv -> Plans: getMonthlyFee()
    Plans - -> Serv: monthlyFee
else (obj.paymentType == "annually")
    Serv -> Plans: getAnnualFee()
    Plans - -> Serv: annualFee
end

Serv -> MonthlyRevenues: generateMonthlyRevenues(planName, monthlyRevenue, dividedAnnualRevenue, numberMonth, monthsToAddRevenue, revenueList)
MonthlyRevenues - -> Serv: -

Serv -> UpdatePlanData: updatePlanData(planName, monthKey, totalRevenue, year, df, revenueList)
UpdatePlanData - -> Serv: -

Serv - -> Ctrl: revenueList
Ctrl -> Mapper: toDashboardRevenueView(displayRevenue)
Mapper - -> View: dashboardRevenueViews

Ac <- - View: show revenue
@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>